-
  we have a VAT tax defined.
-  
    !record {model: account.tax, id: tax_1}:
      name: 'Vat'
      tax_categ: 'vat'
      amount: 0.04
-
  we have a Additional tax defined.
-  
    !record {model: account.tax, id: tax_2}:
      name: 'Additional'
      tax_categ: 'other'
      amount: 0.01
-
  create  one  sale order for [ADPT] USB Adapter.
-
   !record {model: sale.order, id: sale_order_01}:
    partner_id: base.res_partner_2
    order_policy: 'prepaid'
    order_line:
      - product_id: product.product_product_48
        product_uom_qty: 1.0
        price_unit: 18.0
        lst_price: 10.0
        packing_amount: 5.0
        tax_id:
          - tax_1
          - tax_2
-
  I confirm sale order. 
-
  !workflow {model: sale.order, action: order_confirm, ref: sale_order_01}
-
 In order to test the PDF reports defined on an invoice, we will print an Tax Invoice Report.
-
  !python {model: account.invoice}: |
    import netsvc, tools, os
    sale_order_obj = self.pool.get('sale.order').browse(cr, uid, ref('sale_order_01'))
    invoice_id = self.search(cr, uid, [('partner_id','=',sale_order_obj.partner_id.id),('origin','=',sale_order_obj.name)])
    (data, format) = netsvc.LocalService('report.account.invoice.tax.excise').create(cr, uid, invoice_id, {}, {})
    if tools.config['test_report_directory']:
        file(os.path.join(tools.config['test_report_directory'], 'account-invoice.'+format), 'wb+').write(data)

